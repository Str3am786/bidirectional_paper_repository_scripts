\section{Related work}
\label{sec_related_work}

%Despite the wide adoption of {\em Agile Release Engineering} (ARE) practices
%(i.e., continuous integration, rapid releases, continuous delivery and
%continuous deployment), there is still a lack of empirical studies that
%investigate the impact that these practices have on the software development
%activities, i.e., in terms of productivity and quality. 
%Through a systematic literature review, \cite{Karvonen201787} analyzed 619 papers and
%selected 71 primary studies that are related to ARE practices. They found that
%only 8 out of the 71 primary studies empirically investigate CI. 
%Karnoven {\em et al.} highlights that empirical
%research in this field is highly necessary to better understand the impact of
%adopting CI on software development. 
In this section, we situate our study with respect to prior studies that analyze the impact of adopting CI in open-source projects.

\subsubsection*{\textbf{CI and team productivity}}

%\cite{Hilton2016-xy} analyzed 34,544 open-source projects from GitHub and surveyed 442 developers. 
\cite{Hilton2016-xy} found that 70\%
of the most popular GitHub projects use CI. The authors identified that CI helps
projects to release more often and that the CI build status may lead to faster integration of PRs. Differently to Hilton~\textit{et al.}, we
quantitatively observe that CI does not lead to an increase in the release frequency. Instead, more PRs are integrated into releases \textit{after} the adoption of
CI.

\cite{Vasilescu2015-tn} investigated the productivity
and quality of 246 GitHub projects that use CI. They found that projects that
use CI merge PRs more quickly when they are submitted by core developers. Also,
core developers find significantly more bugs when using CI. We use a similar
approach as used by \cite{Vasilescu2015-tn} to
identify projects that use \texttt{Travis CI}.\footnote{\url{https://travis-ci.org/}}  We also analyze the merge time of PRs and
find that the majority of the studied projects merge PRs more quickly
\textit{before} CI. In addition, we also observe that the number of merged PRs
per release is higher \textit{after} adopting CI for most of the projects.  

Regarding the acceptance and latency of PRs in CI, 
\cite{Yu2016-cy} used regression models in a sample of 40 GitHub projects that
use \texttt{Travis CI}. The authors found that the likelihood of rejection of a PR
increases by 89.6\% when the PR breaks the build.  The results also show that
the more succinct a PR is, the greater the probability that such a PR is
reviewed and merged earlier. We complement the prior work by analyzing the most
influential factors that impact the delivery time of merged PRs \textit{before}
and \textit{after} the adoption of CI.

\cite{zhao2017impact} conducted an empirical study to investigate the
transition to \texttt{Travis CI} in a large sample of GitHub open-source projects. 
%They quantitatively compared the CI transition in these projects using metrics such as commit frequency, code churn, PR closing, and issue closing. 
%In addition, they conducted a survey with a sample of developers of those projects. 
%They used a set of three questions related to the adoption of \texttt{Travis CI}. They also asked how their development process was adapted to accommodate the transition to CI. 
The main results of their study are: (i) a
small increase in the number of merged commits \textit{after} CI adoption;  (ii) a
statistically significant decreasing in the number of merge commit churn; (iii)
a moderate increase in the number of issues closed after CI adoption; and (iv)
a stationary behavior in the number of closed PRs as well as a longer
time to close PRs \textit{after} the CI adoption. As opposed to 
\cite{zhao2017impact}, our study focuses on the analysis of delivered PRs. We find that for 54\% of projects, the submitted PRs experience a
longer lifetime after the adoption of \texttt{Travis CI}. Moreover, we observe that PRs
are delivered 3.43 times more per release {\em after} the adoption of CI.

%Other work has studied the delivery time of new features, enhancements, and bug
%fixes \citep{Da_Costa2016-cb, costa2014empirical,  riskyissues2015b,
%	choe2017predicting}. \cite{Da_Costa2016-cb} investigated
%the impact of switching from traditional releases to rapid releases on the
%delivery time of fixed issues of the Firefox project. They used predictive
%models to discover which factors significantly impact the delivery time of
%issues in each release strategy. Differently from prior work, our study focuses
%on the impact of adopting CI on the time-to-delivery of merged PRs.

\subsubsection*{\textbf{CI and code review}}

Recent studies have investigated the impact of CI on code review. The work of \cite{zampetti2019study} 
%uses 64,865 PRs from 69 GitHub projects to quantitatively investigate how developers use the outcome of CI builds on code review. The analysis was complemented by surveying 13 participants. The authors 
found that PRs with passed builds have 1.5 more chances of being merged. Our qualitative investigation corroborates with the results of \cite{zampetti2019study} showing that by using CI, the code review may be impacted by the CI output availability. Furthermore, \cite{cassee2020silent} conducted an exploratory study on 685 GitHub projects that use CI. They found that the amount of discussion before PR acceptance decreased \textit{after} CI adoption, however, the developers perform the same amount of work by communicating less. Indeed, our qualitative study shows that among the list of factors associated with CI adoption that impacts the code review process, the most cited codes were related to an improvement in \textit{automation} and \textit{confidence}.
%, \textit{PR filtering} and \textit{earlier feedback}. 
Our study participants highlight that with CI it is easier for everyone to see what went wrong on the code and that the speed of code review increases once issues on PRs are pointed out immediately. 

\subsubsection*{\textbf{Adherence to CI best practices}}

\cite{Vasilescu2015-tj} studied the usage of
\texttt{Travis CI} in a sample of 223 GitHub projects.
They found that the majority of projects (92.3\%) are configured to use
\texttt{Travis CI}, but less than half actually use it. In a follow-up research, \cite{felidre2019continuous} conducted an empirical study with 1,270 open-source projects that use \texttt{Travis CI}, which aims to understand how these projects are adhering to the CI recommended practices. The authors inspected how common projects that argue to use CI have bad practices like \textit{infrequent commits}, \textit{poor test coverage}, \textit{broken builds for long periods}, and \textit{builds that take too long to run}. The authors observed that 748 (âˆ¼60\%) projects face infrequent commits. 
%Additionally, they were able to find test coverage information for 51 projects. The average code coverage was 78\%, however, one Java and one Ruby project were found with 4\% and 14\% of test coverage, respectively, which is a very low rate. A low test coverage rate might compromise the efficiency of the CI service, once the build might pass even with bugs. 
Additionally, the study of \cite{nery2019empirical} investigates the relationship between the adoption of CI and the evolution of software tests. 
%The authors compared 82 projects that use CI and 82 projects that never used CI. 
%In total, they analyzed 3,936 versions of the studied projects to investigate trends in the test code ratio and coverage. 
The results of the study suggest that CI projects have improved the overall test coverage.
%and 40.2\% of such projects have a rising test code ratio trend, however, projects that do not use CI did not experience the same growth. 
In addition, the responses of the participants of our qualitative study mention that CI may impact the time that merged PRs can be delivered by improving \textit{project quality}, \textit{automation} and the \textit{release process}. According to our participants, the CI might impact the code quality and stability, giving more confidence to launch releases. Also, this confidence can be acquired by automated testing when the project has a higher test coverage rate.

\cite{gallaba2018use} studied 9,312 open-source projects that use \texttt{Travis CI}, to identify how these projects are using or misusing the features of the \texttt{Travis CI} configuration file. The authors found that the majority (48.16\%) of the studied \texttt{Travis CI} specification code is associated with configuration job processing nodes, furthermore, explicit deployment code is rare (2\%), which indicates that developers rarely use \texttt{Travis CI} to implement Continuous Deployment. In our qualitative study, many citations were made by the participants to emphasize the relevance of automated tasks related to CI to improve the project release process. For instance, \textit{automated tests} and \textit{release automation} (i.e., Continuous Deployment) codes are frequently cited when the participants are explaining the influence of CI on the project release process. However, besides many developers understanding CI as a Continuous Deployment enabler, this feature is misused by many projects that use CI \citep{gallaba2018use}.
